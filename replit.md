# 算数・国語問題アプリ

## 概要
小学1年生レベルの算数と国語の問題を生成する教育アプリケーション。フロントエンドのみで動作し、localStorageでデータを永続化。問題は多様性を重視し、同じ問題の繰り返しを避けるように設計。

## 主要機能
- 算数問題（テンキー入力）- 小学1年生レベル
- 国語問題（5択選択）- ひらがな・カタカナ・簡単漢字
- フロントエンド問題生成
- 正解数による特典システム
- ランクシステム
- スマホ対応（スクロール不要）

## 技術スタック
- フロントエンド: HTML + CSS + JavaScript (React)
- バックエンド: Node.js + Express + TypeScript
- データベース: PostgreSQL (Neon)
- AI問題生成: Gemini 2.0 Flash API（サーバーサイド + フロントエンドフォールバック）
- データ保存: PostgreSQL + localStorage（キャッシュ）
- スタイリング: カスタムCSS
- **マルチユーザー対応**: 完全データベース統合実装

## プロジェクト構成
- `client/dist/index.html` - メインアプリケーション
- `server/` - バックエンドAPI（Express + TypeScript）
- `shared/schema.ts` - データモデル定義（Drizzle ORM）
- `server/storage.ts` - データベース操作クラス
- `server/routes.ts` - API エンドポイント定義
- `server/db.ts` - PostgreSQL データベース接続

## 最近の変更
- 2025-07-18: **4桁パスワード認証システム実装** - セキュリティ向上のため名前＋4桁パスワード認証実装、同名ユーザー対応、ログイン機能完全動作
- 2025-07-18: **UI・UX最適化** - 不要な成功メッセージ削除、メッセージ表示によるボックス移動完全防止、モバイル体験向上
- 2025-07-17: **500問データベース保存完了** - 算数300問＋国語200問をPostgreSQLに保存、高速な問題配信システム実装
- 2025-07-17: **安定版アプリケーション完成** - データベース統合、サーバー安定性向上、完全な教育アプリとして利用可能
- 2025-07-17: **問題生成システム最適化** - AI依存からデータベース問題配信へ移行、応答速度大幅改善
- 2025-07-17: **国語問題システム完全実装** - 小学1年生学習指導要領準拠の多様な国語問題200問生成、9つの問題タイプ（カタカナ変換、文字数、反対語、擬音語、分類、季節、助詞など）実装
- 2025-07-17: **算数問題400問生成完了** - 計算問題200問 + 文章題200問のデータベース対応問題生成システム実装
- 2025-07-17: **問題管理システム強化** - 一括保存・個別保存API、問題確認機能、管理画面（upload-questions.html）完全実装
- 2025-07-17: **UI・UX大幅改善** - 回答ボタン動作修正、問題重複防止システム強化、API制限エラー対応改善
- 2025-07-17: **"Question not found"エラー修正** - 質問保存タイミング改善、回答送信前の質問存在確認機能実装
- 2025-07-16: **フロントエンドAI問題生成実装** - Gemini APIを直接ブラウザから呼び出し、リアルタイムAI問題生成を実現
- 2025-07-16: **完全フロントエンド化** - サーバー依存を削除、クライアント側で直接問題生成を実装
- 2025-07-16: **問題データベース拡充** - 算数15種類、国語10種類の小学1年生レベル問題を内蔵
- 2025-07-16: **API接続エラー完全解決** - サーバーAPIへの依存を廃止、安定した動作を実現
- 2025-07-16: **問題生成API完全修復** - サーバーが正常に起動し、算数・国語問題の生成が動作確認済み
- 2025-07-16: **AI問題生成システム実装** - Gemini APIによる高品質な小学1年生レベル問題生成
- 2025-07-16: **教育的品質向上** - 学習指導要領に基づく適切な問題レベル調整
- 2025-07-16: **テンキー挙動修正** - 結果表示後のボタン無効化、重複送信防止
- 2025-07-16: **国語問題漢字除去** - 小学1年生レベルに合わせてひらがな・カタカナのみ
- 2025-07-16: **UI・UX大幅改善** - スマホ画面でスクロール不要、画面遷移問題修正
- 2025-07-16: **小学1年生レベルに調整** - 算数（1-10の数字）、国語（ひらがな中心）
- 2025-07-16: **問題多様性向上** - 15種類以上の問題パターン、同じ問題の繰り返し回避
- 2025-07-16: **フロントエンド完全実装** - サーバー不要、localStorage永続化
- 2025-07-16: **問題生成エラー完全修正** - 算数・国語問題の自動生成と回答判定が正常動作
- 2025-07-16: **"Failed to fetch"エラー修正** - Python HTTPサーバーでCORS・API接続問題解決
- 2025-07-16: **ユーザー登録機能復旧** - main.pyによる安定したWebサーバー実装
- 2025-07-16: **学習機能フル実装** - ユーザー作成、問題生成、回答提出、スコア管理完了
- 2025-07-16: **ランクアップ・特典システム実装** - 正解数による自動ランクアップと特典付与
- 2025-07-16: UI大幅改善 - 美しいグラデーション・カードデザイン実装

## 実行方法（Webアプリ）
- サーバー起動: `cd server && npx ts-node index.ts` → http://localhost:3000
- データベース統合: PostgreSQL自動接続
- **マルチユーザー対応**: 複数ユーザーの同時利用可能
- **スケーラブル**: データベースベースの本格的な教育アプリ

## AI問題生成システム詳細
- **AI エンジン**: Gemini 2.0 Flash API
- **算数問題**: 小学1年生レベル（1-10の数字、足し算・引き算）
- **国語問題**: ひらがな・カタカナのみ（漢字なし）
- **学習指導要領準拠**: 文部科学省の小学1年生カリキュラムに基づく
- **重複回避**: 最近の問題履歴を記録し、同じ問題の繰り返しを防止
- **品質保証**: AIが教育的に適切な問題レベルを自動調整

## 問題設計
### 算数問題（5種類）
- 足し算（1-10の範囲、結果20以下）
- 引き算（結果0以上）
- 数の大小比較
- 数える問題（具体的な物の数）
- 10の合成・分解

### 国語問題（10種類）- 漢字なし
- 反対語問題（ひらがな）
- ひらがな→カタカナ変換
- 同じ音の言葉（ひらがな）
- 文字数問題
- 動物の名前（ひらがな→カタカナ）

## UI改善点
- スマホ画面でテンキー固定表示
- 画面遷移時の状態リセット
- グラデーション背景とカードデザイン
- ホバー効果とアニメーション
- レスポンシブデザイン対応

## ユーザー設定
- 言語: 日本語
- 対象年齢: 小学1年生
- 入力方式: 算数（テンキー）、国語（5択）